<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging window.onload</title>
    <style>
        .my-class {
            color: blue;
        }
    </style>
</head>
<body>
    <h1 id="main-header">Debugging Example</h1>
    <p class="my-class">This is a paragraph with class "my-class".</p>

    <script>
        // Log script execution
        console.log('Script is being executed');

        // Initialize window.entries as an array to store API call logs
        window.entries = [];

        // Function to log and count API calls in window.entries
        function logApiCall(apiName) {
            let entry = window.entries.find(e => e[0] === apiName);
            if (entry) {
                entry[1] += 1; // Increment the count if the API is already logged
            } else {
                window.entries.push([apiName, 1]); // Initialize the count for the new API call
            }
            console.log(`API called: ${apiName}, Count: ${entry ? entry[1] : 1}`);
        }

        // 1. Using document.getElementById
        const header = document.getElementById('main-header');
        logApiCall('document.getElementById');

        // 2. Using document.getElementsByTagName
        const paragraphs = document.getElementsByTagName('p');
        logApiCall('document.getElementsByTagName');

        // 3. Using document.getElementsByClassName
        const classElements = document.getElementsByClassName('my-class');
        logApiCall('document.getElementsByClassName');

        // Debugging window.onload
        //window.onload = function() {
            //console.log('window.onload triggered');
            //console.trace('Trace from window.onload');  // Log stack trace

            // Check if APIs are being called again inside onload
            //const headerInsideOnload = document.getElementById('main-header');
            //logApiCall('document.getElementById (inside window.onload)');
        //};
    </script>
</body>
</html>

